<link rel="import" href="../../bower_components/polymer/polymer.html">


<polymer-element name="resource-list" attributes="userSelection">
  <template>
    <!-- build:css resource-list.css -->
    <link rel="stylesheet" type="text/css" href="resource-list.css">
    <!-- endbuild-->
    <core-localstorage name="conductoor-project-data" value="{{project}}"></core-localstorage>
    <core-ajax
      id = "getResources"
      auto
      url="/"
      params=''
      handleAs="json"
      on-core-response="{{handleResponse}}"
      core-error="{{handleError}}">
    </core-ajax>

    <core-selector selected="0">
    <template repeat="{{resource in resources}}">
      <paper-item
        no-padding
        on-click={{selectPerson}}
        class="resource {{ {free: resource.free, reserved: !resource.free} | tokenList}}">
        {{resource.name}}
      </paper-item>
    </template>
    </core-selector>

  </template>

  <script>
    (function () {
      Polymer( "resource-list", {
        created: function() {
          // TODO
        },
        handleResponse: function(event, response) {
          console.log(response);
          this.resources = [
            {name: "John Doe", free: 1, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "Jaska Jokunen", free: 1, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 0, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 0, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 0, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 1, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 0, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 1, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"},
            {name: "John Doe", free: 0, skills:["Javascript", "PHP", "Front-end"], mainSkill: "Front-end", title: "UI Design"}
          ];
          this.userSelection.selectedPerson = this.resources[0];
        },
        handleError: function(event, response) {
          console.log("Error");
          console.log(response);
        },
        selectPerson: function(event, detail, sender) {
          console.log(sender.templateInstance.model.resource.name);
          this.userSelection.selectedPerson = sender.templateInstance.model.resource;
        }
      });
    })();
  </script>

</polymer-element>

